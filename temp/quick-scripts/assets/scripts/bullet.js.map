{"version":3,"sources":["bullet.js"],"names":["cc","Class","extends","Component","properties","onLoad","direction","p","speed","initWithData","tower","position","enemyNodeList","pNormalize","pSub","node","pAdd","pMult","angle","pAngleSigned","rotation","Math","PI","damage","getComponent","getDamage","update","dt","i","length","enemy","isLiving","distance","pDistance","width","beAttacked","destroy","x","y"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOLC,YAAQ,kBAAY;AAChB,aAAKC,SAAL,GAAiBN,GAAGO,CAAH,CAAK,CAAL,EAAO,CAAP,CAAjB;AACA,aAAKC,KAAL,GAAa,GAAb;AACH,KAVI;;AAYLC,kBAAe,sBAASC,KAAT,EAAgBC,QAAhB,EAA0BC,aAA1B,EAAwC;;AAEnD,aAAKN,SAAL,GAAiBN,GAAGa,UAAH,CAAcb,GAAGc,IAAH,CAAQH,QAAR,EAAkBD,MAAMC,QAAxB,CAAd,CAAjB;AACA,aAAKI,IAAL,CAAUJ,QAAV,GAAqBX,GAAGgB,IAAH,CAAQN,MAAMC,QAAd,EAAwBX,GAAGiB,KAAH,CAAS,KAAKX,SAAd,EAAyB,GAAzB,CAAxB,CAArB;AACA,YAAIY,QAAQlB,GAAGmB,YAAH,CAAgB,KAAKb,SAArB,EAAgCN,GAAGO,CAAH,CAAK,CAAL,EAAO,CAAP,CAAhC,CAAZ;AACA,aAAKQ,IAAL,CAAUK,QAAV,GAAsB,MAAIC,KAAKC,EAAV,GAAgBJ,KAArC;AACA,aAAKN,aAAL,GAAqBA,aAArB;AACA,aAAKW,MAAL,GAAcb,MAAMc,YAAN,CAAmB,OAAnB,EAA4BC,SAA5B,EAAd;AACH,KApBI;;AAsBLC,YAAQ,gBAAUC,EAAV,EAAc;;AAElB,aAAKZ,IAAL,CAAUJ,QAAV,GAAqBX,GAAGgB,IAAH,CAAQ,KAAKD,IAAL,CAAUJ,QAAlB,EAA4BX,GAAGiB,KAAH,CAAS,KAAKX,SAAd,EAAwB,KAAKE,KAAL,GAAYmB,EAApC,CAA5B,CAArB;;AAEA,aAAI,IAAIC,IAAE,CAAV,EAAaA,IAAI,KAAKhB,aAAL,CAAmBiB,MAApC,EAA4CD,GAA5C,EAAgD;AAC5C,gBAAIE,QAAQ,KAAKlB,aAAL,CAAmBgB,CAAnB,CAAZ;;AAEA,gBAAIE,KAAJ,EAAW;AACP,oBAAIA,MAAMN,YAAN,CAAmB,OAAnB,EAA4BO,QAA5B,EAAJ,EAA4C;AAC5C,wBAAIC,WAAWhC,GAAGiC,SAAH,CAAaH,MAAMnB,QAAnB,EAA4B,KAAKI,IAAL,CAAUJ,QAAtC,CAAf;AACJ,wBAAIqB,WAAYF,MAAMI,KAAN,GAAc,GAAd,GAAoB,KAAKnB,IAAL,CAAUmB,KAAV,GAAkB,GAAtD,EAA4D;;AAExDJ,8BAAMN,YAAN,CAAmB,OAAnB,EAA4BW,UAA5B,CAAuC,KAAKZ,MAA5C;;AAEA,6BAAKR,IAAL,CAAUqB,OAAV;AACH;AACA;AACA;AACJ;;AAED,YAAI,KAAKrB,IAAL,CAAUJ,QAAV,CAAmB0B,CAAnB,GAAuB,CAAC,IAAD,GAAQ,GAA/B,IAAsC,KAAKtB,IAAL,CAAUJ,QAAV,CAAmB0B,CAAnB,GAAuB,OAAO,GAApE,IAA2E,KAAKtB,IAAL,CAAUJ,QAAV,CAAmB2B,CAAnB,GAAuB,OAAO,GAAzG,IAAgH,KAAKvB,IAAL,CAAUJ,QAAV,CAAmB2B,CAAnB,GAAuB,CAAC,IAAD,GAAO,GAAlJ,EAAuJ;AACnJ,iBAAKvB,IAAL,CAAUqB,OAAV;AAEH;AACJ;AA9CI,CAAT","file":"bullet.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        \n    },\n\n    onLoad: function () {\n        this.direction = cc.p(0,1);\n        this.speed = 300;\n    },\n\n    initWithData : function(tower, position, enemyNodeList){ \n\n        this.direction = cc.pNormalize(cc.pSub(position, tower.position)); \n        this.node.position = cc.pAdd(tower.position, cc.pMult(this.direction, 100));\n        let angle = cc.pAngleSigned(this.direction, cc.p(0,1)); \n        this.node.rotation = (180/Math.PI) * angle; \n        this.enemyNodeList = enemyNodeList;\n        this.damage = tower.getComponent(\"tower\").getDamage();\n    },\n\n    update: function (dt) {\n\n        this.node.position = cc.pAdd(this.node.position, cc.pMult(this.direction,this.speed *dt));\n\n        for(let i=0; i < this.enemyNodeList.length; i++){\n            let enemy = this.enemyNodeList[i];\n\n            if (enemy) {\n                if (enemy.getComponent(\"enemy\").isLiving()) {\n                let distance = cc.pDistance(enemy.position,this.node.position);\n            if (distance < (enemy.width * 0.5 + this.node.width * 0.5)) {\n\n                enemy.getComponent(\"enemy\").beAttacked(this.damage);\n\n                this.node.destroy();\n            };\n            };\n            };\n        }        \n\n        if (this.node.position.x < -1920 * 0.5 || this.node.position.x > 1920 * 0.5 || this.node.position.y > 1080 * 0.5 || this.node.position.y < -1080* 0.5) {\n            this.node.destroy();\n            \n        };\n    },\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}